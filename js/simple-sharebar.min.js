/*
 * ShareBar 
 *
 * Based off http://wordpress.org/extend/plugins/sharebar/ by mdolon
 *
 */
jQuery.fn.sharebar = function(options) {

	var opts = jQuery.extend( sharebar_args, options ); 
	
	var o = jQuery.meta ? jQuery.extend({}, opts, jQueryjQuery.data()) : opts;

	var w = jQuery(window).width();
	
	var sharebar = jQuery('.simple-sharebar.vertical');
	
	var parent = jQuery(sharebar).parent().width();
		
	var start = sharebar_init();
	
	/* Initial positioning of the sharebar */
	function sharebar_init(){
					
		jQuery(sharebar).css('width',o.swidth+'px');
				
		if ( o.position == 'left' ) 
			jQuery(sharebar).css('margin-left',(0-parseInt(o.swidth)-parseInt(o.leftOffset))+'px');
		else {
			jQuery(sharebar).css('margin-left',(parseInt(parent)+parseInt(o.rightOffset))+'px');
		}
		
		if ( w > o.minwidth ) 
			jQuery(sharebar).fadeIn();
			
		jQuery.event.add( window, "scroll", sharebar_scroll );
		
		jQuery.event.add( window, "resize", sharebar_resize );
		
		return jQuery(sharebar).offset().top;
				
	}
	
	/* Handle resize event */
	function sharebar_resize() {
	
		var w = jQuery(window).width();
		
		if ( w < o.minwidth )
			jQuery(sharebar).fadeOut();		
		else
			jQuery(sharebar).fadeIn();
		
	}
	
	/* Handle scroll event */
	function sharebar_scroll() {
	
		var p = jQuery(window).scrollTop();
		
		var w = jQuery(window).width();
				
		jQuery(sharebar).css( 'position', ( (p+parseInt(o.topOffset)) > start ) ? 'fixed' : 'absolute' );
		
		jQuery(sharebar).css( 'top', ( (p+parseInt(o.topOffset)) > start ) ? o.topOffset+'px' : '' );
		
	}

};

jQuery(document).ready(function($) { 
	
	if ( $( '.simple-sharebar.vertical' ).length != 0 ) {
		$('.simple-sharebar.vertical').sharebar(); 
	}
	
});